<section class="pb-6" data-testid="inscription-page">
  <h1 class="text-2xl font-semibold tracking-tight text-white/95" data-testid="page-title"><%= title %></h1>
  <div class="mt-3 font-mono text-xs text-white/55" data-testid="inscription-meta">
    <span data-testid="inscription-id"><%= inscription.id %></span>
  </div>

  <div class="mt-6 grid grid-cols-1 items-start gap-8 md:grid-cols-12">
    <div class="md:col-span-7">
      <div class="relative aspect-square border border-white/10 bg-white/[0.02]" data-testid="media" data-controller="image">
        <div
          class="absolute inset-0 animate-pulse bg-gradient-to-br from-white/[0.03] via-white/[0.06] to-white/[0.02]"
          data-image-target="skeleton"
        ></div>
        <img
          src="<%= inscription.mediaUrl %>"
          alt="<%= title %>"
          loading="eager"
          decoding="async"
          class="block h-full w-full object-contain opacity-0 transition-opacity duration-300"
          data-image-target="img"
          data-action="load->image#loaded error->image#error"
          data-testid="inscription-media-img"
        />
      </div>

    </div>

    <aside class="md:col-span-5">
      <div
        class="border border-white/10 bg-white/[0.03] px-5 py-5"
        data-testid="purchase-panel"
        data-controller="checkout"
        data-checkout-price-value="<%= checkout.priceSats %>"
        data-checkout-vbytes-value="<%= checkout.estimatedVbytes %>"
      >
        <div class="flex items-baseline gap-2" data-testid="price-row">
          <div class="text-4xl font-semibold tracking-tight text-white/95" data-testid="price-sats"><%= checkout.priceSatsFormatted %></div>
          <div class="text-4xl font-semibold tracking-tight text-white/55">SATS</div>
        </div>

        <div class="mt-6 space-y-4" data-testid="fees">
          <div>
            <div class="flex items-baseline justify-between gap-3">
              <div class="text-sm font-semibold text-white/75">Fee rate</div>
              <div class="font-mono text-xs text-white/55">sat/vB</div>
            </div>
            <div class="mt-2">
              <input
                class="w-full appearance-none border border-white/10 bg-white/[0.02] px-3 py-2 font-mono text-sm text-white/85 outline-none focus:border-white/20 focus:outline-none focus:ring-0"
                type="number"
                inputmode="numeric"
                name="fee_rate_sat_vb"
                value="<%= checkout.feeRateDefault %>"
                data-checkout-target="feeRate"
                data-action="input->checkout#recalc"
              />
            </div>
          </div>

          <div class="space-y-2 text-sm text-white/65">
            <div class="flex items-baseline justify-between gap-3">
              <div class="text-white/55">Network fee</div>
              <div class="font-mono text-sm text-white/85"><span data-checkout-target="fee">0</span> SATS</div>
            </div>
            <div class="flex items-baseline justify-between gap-3">
              <div class="font-semibold text-white/75">Total</div>
              <div class="font-mono text-sm font-semibold text-orange-500"><span data-checkout-target="total">0</span> SATS</div>
            </div>
          </div>
        </div>

        <form class="mt-6" method="post" action="<%= buy.action %>" data-testid="buy-form">
          <button
            class="w-full border border-synth-red/40 bg-synth-red/15 px-4 py-3 text-sm font-semibold tracking-tight text-white/95 hover:bg-synth-red/20"
            type="submit"
            data-testid="buy-button"
            data-action="click->store#buy"
          >Buy now</button>
        </form>

        <div class="<%= buy.errorClass %> mt-4 border border-white/10 bg-white/[0.03] px-4 py-3" data-testid="buy-error">
          <div class="text-sm font-semibold text-white/85">Buy</div>
          <div class="mt-2 font-mono text-xs leading-relaxed text-white/60"><%= buy.error %></div>
        </div>

        <div class="mt-6 border-t border-white/10 pt-4" data-testid="details">
          <div class="text-sm font-semibold text-white/85">Details</div>
          <dl class="mt-3 space-y-2 text-sm text-white/65">
            <div class="flex items-baseline justify-between gap-4">
              <dt class="text-white/55">Inscription</dt>
              <dd class="truncate font-mono text-xs text-white/70"><%= inscription.id %></dd>
            </div>
            <div class="flex items-baseline justify-between gap-4">
              <dt class="text-white/55">Number</dt>
              <dd class="font-mono text-xs text-white/70"><%= inscription.number %></dd>
            </div>
            <div class="flex items-baseline justify-between gap-4">
              <dt class="text-white/55">Seller</dt>
              <dd class="truncate font-mono text-xs text-white/70"><%= CONFIG.store_address %></dd>
            </div>
          </dl>
        </div>
      </div>
    </aside>
  </div>
</section>
